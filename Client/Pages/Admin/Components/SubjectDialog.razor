@using ICSS.Shared

<MudDialog>
    <TitleContent>
        <MudText Typo="Typo.h6">
            <MudIcon Icon="@($"fa-solid fa-{Icon}")"></MudIcon>
            @Action Subject Information
        </MudText>
    </TitleContent>
    <DialogContent>
        <MudForm @ref="_form" Model="subjects">
            <MudStack>                
                <MudTextField @bind-Value="subjects.SubjectCode" Label="Subject Code" Variant="Variant.Outlined" Margin="Margin.Dense"></MudTextField>
                <MudTextField @bind-Value="subjects.SubjectName" Label="Subject Description" Variant="Variant.Outlined" Margin="Margin.Dense"></MudTextField>
                <MudNumericField HideSpinButtons @bind-Value="subjects.Units" Label="Units" Variant="Variant.Outlined" Margin="Margin.Dense"></MudNumericField>
                <MudNumericField HideSpinButtons @bind-Value="subjects.LectureHour" Label="Lecture Hours" Variant="Variant.Outlined" Margin="Margin.Dense"></MudNumericField>
                <MudNumericField HideSpinButtons @bind-Value="subjects.LabHour" Label="Laboratory Hours" Variant="Variant.Outlined" Margin="Margin.Dense"></MudNumericField>
                <MudNumericField HideSpinButtons @bind-Value="subjects.MaxStudent" Label="Student Capacity" Variant="Variant.Outlined" Margin="Margin.Dense"></MudNumericField>
                <MudSwitch @bind-Value="subjects.IsActive" Label="Is Active" Color="Color.Success" />

            </MudStack>
        </MudForm>
    </DialogContent>
    <DialogActions>
        <MudButton Disabled="_loading" Size="Size.Medium" OnClick="Cancel">Cancel</MudButton>
        <MudLoadingButton Variant="Variant.Filled"
        Color="Color.Success"
        Size="Size.Medium"
        Loading="@(_loading)"
        OnClick="@(async => OnSubmit())"
        ButtonType="ButtonType.Button">
            <LoadingContent>Submitting...</LoadingContent>
            <ChildContent>Submit</ChildContent>
        </MudLoadingButton>
    </DialogActions>
</MudDialog>

@code{
    [CascadingParameter] MudDialogInstance? MudDialog { get; set; }
    [Inject] HttpClient? httpClient { get; set; }
    [Inject] ISnackbar Snackbar { get; set; }

    [Parameter] public string? Action { get; set; }
    [Parameter] public string? Icon { get; set; }
    [Parameter] public Subjects subjects { get; set; }
    [Parameter] public string? currentUserId { get; set; }

    MudForm? _form;
    private bool _loading = false;

    void Cancel() => MudDialog.Cancel();


    private async Task OnSubmit()
    {

    }


}